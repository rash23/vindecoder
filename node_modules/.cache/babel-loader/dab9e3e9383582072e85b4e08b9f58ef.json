{"ast":null,"code":"import _toConsumableArray from\"/Users/v.horodetskyi/Documents/vindecoder/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/v.horodetskyi/Documents/vindecoder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/v.horodetskyi/Documents/vindecoder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/v.horodetskyi/Documents/vindecoder/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{StyledForm,StyledInput,StyleButton,StyledContainer,StyledError,StyledLink}from'../styles/form.styled';import Card from'./card';import{useState}from'react';import{Store}from'../helpers/storage';import{request}from'../helpers/request';import{isVin}from'../helpers/isinput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function VinForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inpValue=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todo=_useState4[0],setTodo=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var list={id:Date.now().toString(),title:inpValue};var getInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(vin){var info;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request(\"https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVinValuesExtended/\".concat(vin,\"?format=json\"),{method:'GET'});case 2:info=_context.sent;setErrorMessage(info.Message);return _context.abrupt(\"return\",info.Results[0]);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getInfo(_x){return _ref.apply(this,arguments);};}();var decodeVin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!isVin(inpValue)){_context2.next=12;break;}_context2.next=4;return getInfo(inpValue);case 4:data=_context2.sent;setState(data);setTodo([].concat(_toConsumableArray(todo),[list]));setInput('');setError('');new Store().setState('storage',{id:Date.now().toString(),obj:inpValue});_context2.next=13;break;case 12:setError('Please enter correct VIN. Example: 1FTFW1CT5DFC10312');case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function decodeVin(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(StyledContainer,{children:[/*#__PURE__*/_jsxs(StyledForm,{noValidate:true,onSubmit:decodeVin,children:[/*#__PURE__*/_jsx(\"p\",{children:\"VIN\"}),/*#__PURE__*/_jsx(StyledInput,{type:\"text\",onChange:function onChange(event){return setInput(event.target.value);},value:inpValue}),/*#__PURE__*/_jsx(StyledError,{children:error}),/*#__PURE__*/_jsx(StyleButton,{type:\"submit\",children:\"Decode VIN\"}),/*#__PURE__*/_jsx(StyledError,{children:errorMessage})]}),/*#__PURE__*/_jsx(StyledLink,{to:\"/results\",children:\"Last results\"})]}),/*#__PURE__*/_jsx(Card,{data:state})]});}export default VinForm;","map":{"version":3,"names":["React","StyledForm","StyledInput","StyleButton","StyledContainer","StyledError","StyledLink","Card","useState","Store","request","isVin","VinForm","inpValue","setInput","todo","setTodo","state","setState","error","setError","errorMessage","setErrorMessage","list","id","Date","now","toString","title","getInfo","vin","method","info","Message","Results","decodeVin","e","preventDefault","data","obj","event","target","value"],"sources":["/Users/v.horodetskyi/Documents/vindecoder/src/app/form.jsx"],"sourcesContent":["import React from 'react';\nimport { StyledForm, StyledInput, StyleButton, StyledContainer, StyledError, StyledLink } from '../styles/form.styled';\nimport Card from './card';\nimport { useState } from 'react';\nimport { Store } from '../helpers/storage';\nimport { request } from '../helpers/request';\nimport { isVin } from '../helpers/isinput';\n\nfunction VinForm() {\n\tconst [inpValue, setInput] = useState('');\n\tconst [todo, setTodo] = useState([]);\n\tconst [state, setState] = useState();\n\tconst [error, setError] = useState('');\n\tconst [errorMessage, setErrorMessage] = useState('');\n\n\tconst list = {\n\t\tid: Date.now().toString(),\n\t\ttitle: inpValue,\n\t};\n\n\tconst getInfo = async (vin) => {\n\t\tconst info = await request(`https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVinValuesExtended/${vin}?format=json`, {\n\t\t\tmethod: 'GET',\n\t\t});\n\n\t\tsetErrorMessage(info.Message);\n\n\t\treturn info.Results[0];\n\t};\n\n\tconst decodeVin = async (e) => {\n\t\te.preventDefault();\n\n\t\tif (isVin(inpValue)) {\n\t\t\tconst data = await getInfo(inpValue);\n\n\t\t\tsetState(data);\n\t\t\tsetTodo([...todo, list]);\n\t\t\tsetInput('');\n\t\t\tsetError('');\n\n\t\t\tnew Store().setState('storage', {\n\t\t\t\tid: Date.now().toString(),\n\t\t\t\tobj: inpValue,\n\t\t\t});\n\t\t} else {\n\t\t\tsetError('Please enter correct VIN. Example: 1FTFW1CT5DFC10312');\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<StyledContainer>\n\t\t\t\t<StyledForm noValidate onSubmit={decodeVin}>\n\t\t\t\t\t<p>VIN</p>\n\t\t\t\t\t<StyledInput type=\"text\" onChange={(event) => setInput(event.target.value)} value={inpValue} />\n\t\t\t\t\t<StyledError>{error}</StyledError>\n\t\t\t\t\t<StyleButton type=\"submit\">Decode VIN</StyleButton>\n\t\t\t\t\t<StyledError>{errorMessage}</StyledError>\n\t\t\t\t</StyledForm>\n\t\t\t\t<StyledLink to={`/results`}>Last results</StyledLink>\n\t\t\t</StyledContainer>\n\n\t\t\t<Card data={state} />\n\t\t</>\n\t);\n}\n\nexport default VinForm;\n"],"mappings":"ohBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,WAAlC,CAA+CC,eAA/C,CAAgEC,WAAhE,CAA6EC,UAA7E,KAA+F,uBAA/F,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,KAAT,KAAsB,oBAAtB,CACA,OAASC,OAAT,KAAwB,oBAAxB,CACA,OAASC,KAAT,KAAsB,oBAAtB,C,6IAEA,QAASC,QAAT,EAAmB,CAClB,cAA6BJ,QAAQ,CAAC,EAAD,CAArC,wCAAOK,QAAP,eAAiBC,QAAjB,eACA,eAAwBN,QAAQ,CAAC,EAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eACA,eAA0BR,QAAQ,EAAlC,yCAAOS,KAAP,eAAcC,QAAd,eACA,eAA0BV,QAAQ,CAAC,EAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,eAAwCZ,QAAQ,CAAC,EAAD,CAAhD,0CAAOa,YAAP,gBAAqBC,eAArB,gBAEA,GAAMC,KAAI,CAAG,CACZC,EAAE,CAAEC,IAAI,CAACC,GAAL,GAAWC,QAAX,EADQ,CAEZC,KAAK,CAAEf,QAFK,CAAb,CAKA,GAAMgB,QAAO,4FAAG,iBAAOC,GAAP,mJACIpB,QAAO,2EAAoEoB,GAApE,iBAAuF,CAChHC,MAAM,CAAE,KADwG,CAAvF,CADX,QACTC,IADS,eAKfV,eAAe,CAACU,IAAI,CAACC,OAAN,CAAf,CALe,gCAORD,IAAI,CAACE,OAAL,CAAa,CAAb,CAPQ,wDAAH,kBAAPL,QAAO,4CAAb,CAUA,GAAMM,UAAS,6FAAG,kBAAOC,CAAP,iIACjBA,CAAC,CAACC,cAAF,GADiB,IAGb1B,KAAK,CAACE,QAAD,CAHQ,kDAIGgB,QAAO,CAAChB,QAAD,CAJV,QAIVyB,IAJU,gBAMhBpB,QAAQ,CAACoB,IAAD,CAAR,CACAtB,OAAO,8BAAKD,IAAL,GAAWQ,IAAX,GAAP,CACAT,QAAQ,CAAC,EAAD,CAAR,CACAM,QAAQ,CAAC,EAAD,CAAR,CAEA,GAAIX,MAAJ,GAAYS,QAAZ,CAAqB,SAArB,CAAgC,CAC/BM,EAAE,CAAEC,IAAI,CAACC,GAAL,GAAWC,QAAX,EAD2B,CAE/BY,GAAG,CAAE1B,QAF0B,CAAhC,EAXgB,gCAgBhBO,QAAQ,CAAC,sDAAD,CAAR,CAhBgB,yDAAH,kBAATe,UAAS,8CAAf,CAoBA,mBACC,wCACC,MAAC,eAAD,yBACC,MAAC,UAAD,EAAY,UAAU,KAAtB,CAAuB,QAAQ,CAAEA,SAAjC,wBACC,0BADD,cAEC,KAAC,WAAD,EAAa,IAAI,CAAC,MAAlB,CAAyB,QAAQ,CAAE,kBAACK,KAAD,QAAW1B,SAAQ,CAAC0B,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAnB,EAAnC,CAA4E,KAAK,CAAE7B,QAAnF,EAFD,cAGC,KAAC,WAAD,WAAcM,KAAd,EAHD,cAIC,KAAC,WAAD,EAAa,IAAI,CAAC,QAAlB,wBAJD,cAKC,KAAC,WAAD,WAAcE,YAAd,EALD,GADD,cAQC,KAAC,UAAD,EAAY,EAAE,WAAd,0BARD,GADD,cAYC,KAAC,IAAD,EAAM,IAAI,CAAEJ,KAAZ,EAZD,GADD,CAgBA,CAED,cAAeL,QAAf"},"metadata":{},"sourceType":"module"}